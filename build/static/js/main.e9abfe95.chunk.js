(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(15),c=n.n(r),o=n(3),a=n(1),u=n(0),i=function(e){var t=e.filter,n=e.handleFilterChange;return Object(u.jsxs)("div",{children:["filter shown with ",Object(u.jsx)("input",{value:t,onChange:n})]})},s=n(6),l=n(4),d=n.n(l),j="/api/persons",b={getAll:function(){return d.a.get(j).then((function(e){return e.data}))},create:function(e){return d.a.post(j,e).then((function(e){return e.data}))},update:function(e,t){return d.a.put("".concat(j,"/").concat(e),t).then((function(e){return e.data}))},remove:function(e){d.a.delete("".concat(j,"/").concat(e))}},f=function(e){var t=e.persons,n=e.setPersons,r=e.setMessage,c=e.setColor,i=Object(a.useState)(""),l=Object(o.a)(i,2),d=l[0],j=l[1],f=Object(a.useState)(""),h=Object(o.a)(f,2),O=h[0],m=h[1];return Object(u.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),t.some((function(e){return e.name===d}))){var o=t.filter((function(e){return e.name===d}))[0],a=o.id,u=Object(s.a)(Object(s.a)({},o),{},{number:O});window.confirm("".concat(d," is already added to phonebook, replace the old number with a new one?"))&&b.update(a,u).then((function(e){n(t.map((function(t){return t.id!==e.id?t:e}))),r("Updated ".concat(d)),c("green"),setTimeout((function(){r(null)}),3e3)})).catch((function(e){n(t.filter((function(e){return e.id!==a}))),r("Information of ".concat(d," has already been removed from server")),c("red"),setTimeout((function(){r(null)}),3e3)}))}else{var i={name:d,number:O};b.create(i).then((function(e){return n(t.concat(e))})),r("Added ".concat(d)),c("green"),setTimeout((function(){r(null)}),3e3)}j(""),m("")},children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:d,onChange:function(e){j(e.target.value)}})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:O,onChange:function(e){m(e.target.value)}})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){var t=e.persons,n=e.setPersons;return Object(u.jsx)("div",{children:t.map((function(e){return Object(u.jsxs)("div",{children:[e.name," ",e.number,Object(u.jsx)("button",{onClick:function(){return function(e){window.confirm("Delete ".concat(e.name,"?"))&&(b.remove(e.id),n(t.filter((function(t){return t.id!==e.id}))))}(e)},children:"delete"})]},e.id)}))})},O=function(e){var t=e.message,n=e.color;if(null===t)return null;var r={color:n};return Object(u.jsx)("div",{className:"message",style:r,children:t})},m=function(){var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),s=Object(o.a)(c,2),l=s[0],d=s[1],j=Object(a.useState)(null),m=Object(o.a)(j,2),v=m[0],p=m[1],x=Object(a.useState)("white"),g=Object(o.a)(x,2),w=g[0],C=g[1];Object(a.useEffect)((function(){b.getAll().then((function(e){return r(e)}))}),[]);var k=n.filter((function(e){return e.name.toLowerCase().includes(l.toLowerCase())}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(O,{message:v,color:w}),Object(u.jsx)(i,{filter:l,handleFilterChange:function(e){d(e.target.value)}}),Object(u.jsx)("h3",{children:"add a new"}),Object(u.jsx)(f,{persons:n,setPersons:r,setMessage:p,setColor:C}),Object(u.jsx)("h3",{children:"Numbers"}),Object(u.jsx)(h,{persons:k,setPersons:r})]})};n(39);c.a.render(Object(u.jsx)(m,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.e9abfe95.chunk.js.map